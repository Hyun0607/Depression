# 🧠 개인 특성 기반 우울증 예측 모델링 (R)

## 🎯 프로젝트 개요

- 다양한 개인 특성(나이, 음주, 식습관, 수면 패턴 등)을 바탕으로 **우울증 경험 여부(History of Depression)** 를 예측하는 분류 모델 구축
- 의료 및 복지 서비스에서 고위험군 사전 식별을 위한 **데이터 기반 접근의 가능성** 제시
- 데이터 전처리부터 모델 성능 비교까지 **R 기반 전체 파이프라인** 구현

---

## 🛠️ 담당 역할

| 이름 | 역할 |
|------|------|
| **정현우** | 데이터 EDA 및 전처리, 변수 변환 로직 구현, 불균형 데이터 조정 및 시각화 |
| **변지민** | 모델링 기획 및 구현, 혼동행렬을 이용한 모델 평가 및 최종 모델 구축 |

- `fread` + `dplyr` 기반 전처리 파이프라인 구성
- 나이/소득 범주화, 문자열 인코딩(라벨/원핫), 불균형 조정(SMOTE 아님)
- 시각화: `ggplot2` 기반 변수 분포 및 클래스 비율 시각화

---

## ⚙️ 전체 흐름

1. **데이터 불균형 조정**
   - 우울증 경험 비율: Yes/No 간 불균형 → 70:30 비율로 리샘플링
2. **범주형 변수 변환**
   - 나이 → 청년/중년/노년
   - 소득 → 사분위 기준으로 저소득/중소득/고소득
   - 기타 변수 → 라벨 인코딩 + 원핫 인코딩 혼합 적용
- 변수 분포 시각화

<p align="center">
  <img src="https://github.com/user-attachments/assets/bba7bc78-18ce-4338-924d-61e8febf88d6" width="400"/>
  <img src="https://github.com/user-attachments/assets/32658e00-cecf-475f-8990-887e94ead21a" width="400"/>
</p>  

3. **분석용 변수 선택**
   - 공선성 확인 후 다중 공선성 변수 제거 (VIF)
   - 최적 feature subset 구성

---

## 📊 모델링 및 성능 비교

### ✅ 사용한 모델 요약

| 모델 | 주요 특징 | 성능 요약 |
|------|-----------|------------|
| **로지스틱 회귀** | - 변수별 영향도 해석 가능  
- 간단한 선형 모델로 베이스라인 비교용  
- 다중공선성 제거 과정 포함 (`VIF`) | - ROC Curve 기반 AUC 측정  
- 회귀계수 해석으로 유의 변수 파악 |
| **의사결정나무 (rpart)** | - 직관적인 규칙 도출  
- 시각화 가능(Tree Plot)  
- `xerror` 기반 가지치기 수행 | - 가지치기 전후 모델 비교  
- confusion matrix로 성능 측정 |
| **랜덤 포레스트** | - 앙상블 기반 높은 예측 성능  
- 변수 중요도 시각화 (`varImpPlot`)  
- 과적합 방지 | - Accuracy 기준 성능 우수  
- 주요 변수 확인 가능 |

---

### 📈 모델별 성능 시각화

- 🔹 **로지스틱 회귀**
  - ROC Curve 시각화  
  - Threshold 기준 최적 Cutoff 설정  
  - 📎 _삽입 위치 예시_: `./images/logistic_roc.png`

- 🔹 **의사결정나무**
  - 모델 구조 트리 시각화  
  - 가지치기 전후 비교  
  - 📎 _삽입 위치 예시_: `./images/rpart_tree.png`

- 🔹 **랜덤 포레스트**
  - 변수 중요도 그래프 (`varImpPlot`)  
  - Confusion Matrix 비교  
  - 📎 _삽입 위치 예시_: `./images/rf_importance.png`, `./images/rf_cm.png`

---

> ☑️ 각 모델별로 confusion matrix와 성능 지표(AUC, Accuracy)를 비교하여 최종 모델 선정에 활용하였습니다.

---

## 🧾 주요 성과

- 다양한 전처리/분석 기법을 실습 환경에서 직접 구현
- 라벨링/범주화/샘플링 전략의 성능 영향을 실험적으로 검토
- 모델별 성능/복잡도/해석력 균형을 고려한 평가

---

## 💡 향후 개선 방향

- SMOTE 등 오버샘플링 기반의 고도화된 불균형 처리 적용
- Shiny를 활용한 대시보드 기반 우울증 예측 UI 설계
- 다양한 사회적-환경적 맥락에서 보다 효과적인 정책적 개입 방안 설계 가능

